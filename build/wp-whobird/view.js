document.addEventListener("DOMContentLoaded",(function(){!function(){const t=document.querySelectorAll(".wpwbd_list li"),e=document.getElementById("play-pause"),n=document.getElementById("prev"),d=document.getElementById("next"),r=document.getElementById("current-track");let c=null,o=[],i=0,a=!1;const l=new Audio,u=()=>{r.textContent=`Track ${i+1} / ${o.length} (${c.textContent})`},s=()=>{l.play(),a=!0,e.textContent="⏸"},g=t=>{c=t,o=t.getAttribute("data-recordings").split(","),i=0,l.src=o[i],u()};e.addEventListener("click",(()=>{a?(l.pause(),a=!1,e.textContent="▶️"):s()})),n.addEventListener("click",(()=>{c&&(i=(i-1+o.length)%o.length,l.src=o[i],u(),a&&s())})),l.addEventListener("ended",(()=>{i<o.length-1&&(i=(i+1)%o.length,l.src=o[i],u(),s())})),d.addEventListener("click",(()=>{c&&(i=(i+1)%o.length,l.src=o[i],u(),a&&s())})),t.forEach((t=>{t.addEventListener("click",(()=>{g(t),s()}))})),t.length>0&&g(t[0])}(),function(){let t=[],e=!1;function n(e){t.push(e),d()}function d(){if(e||0===t.length)return;e=!0;const n=t.shift();console.log(ajaxurl),jQuery.ajax({url:ajaxurl,method:"POST",data:{action:"update_bird_data",ebird_id:n},success:function(t){if(t.success){const e=document.querySelector(`.wpwbd-bird-entry[data-ebird-id="${n}"]`);e&&(e.innerHTML=t.data.html)}},error:function(){console.error(`Error updating bird data for ${n}.`)},complete:function(){e=!1,d()}})}document.querySelectorAll(".wpwbd-bird-entry[data-ebird-id]").forEach((t=>{n(t.getAttribute("data-ebird-id"))}))}()}));